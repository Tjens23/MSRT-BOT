# Default values for msrt-bot.
# This is a YAML-formatted file.

# Global settings
global:
    imageRegistry: docker.io
    storageClass: ''

# Application configuration
app:
    name: msrt-bot
    version: '1.0.0'

# Image configuration
image:
    repository: tjens23/msrtbot
    tag: latest
    pullPolicy: Always

# Bot configuration
bot:
    # Discord configuration - these should be set via --set or values override
    discord:
        token: ''
        clientId: ''
        guildId: ''

    # Environment
    nodeEnv: production
    logLevel: info

# Database configuration
database:
    # Set to false to use external database
    enabled: true

    # Internal PostgreSQL configuration
    postgres:
        image:
            repository: postgres
            tag: '15-alpine'

        # Database credentials
        auth:
            database: msrt_bot
            username: msrt_user
            password: '' # Should be set via --set or external secret

        # Storage configuration
        persistence:
            enabled: true
            size: 10Gi
            storageClass: ''

        # Resource limits
        resources:
            requests:
                memory: 256Mi
                cpu: 250m
            limits:
                memory: 512Mi
                cpu: 500m

    # External database configuration (when database.enabled=false)
    external:
        host: ''
        port: 5432
        database: msrt_bot
        username: msrt_user
        password: ''

# Application resources
resources:
    requests:
        memory: 256Mi
        cpu: 250m
    limits:
        memory: 512Mi
        cpu: 500m

# Replica configuration
replicaCount: 1 # Should always be 1 for Discord bots

# Autoscaling (not recommended for Discord bots)
autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 1
    targetCPUUtilizationPercentage: 80

# Service configuration
service:
    type: ClusterIP
    port: 3000
    targetPort: 3000

# Security context
securityContext:
    runAsNonRoot: true
    runAsUser: 1001
    runAsGroup: 1001
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: false
    capabilities:
        drop:
            - ALL

# Pod disruption budget
podDisruptionBudget:
    enabled: true
    minAvailable: 1

# Network policy
networkPolicy:
    enabled: true
    allowMonitoring: true

# Monitoring and health checks
monitoring:
    enabled: true

healthChecks:
    enabled: true
    livenessProbe:
        initialDelaySeconds: 30
        periodSeconds: 30
        timeoutSeconds: 5
        failureThreshold: 3
    readinessProbe:
        initialDelaySeconds: 10
        periodSeconds: 10
        timeoutSeconds: 5
        failureThreshold: 3

# Node selector and tolerations
nodeSelector: {}

tolerations: []

affinity: {}

# Additional environment variables
extraEnvVars: []
# - name: EXTRA_VAR
#   value: "extra-value"

# Additional secrets
extraSecrets: {}
# extraSecret: "secret-value"

# Init containers
initContainers:
    waitForDb:
        enabled: true
        image:
            repository: postgres
            tag: '15-alpine'
